<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark"
		title="登录"
		backgroundColor="#95CDE7" xmlns:components="components.*">
	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		@namespace f "spark.skins.mobile.*";
		
		@media (os-platform: "IOS")
		{
			.loginButton
			{
				chromeColor: #319ED7;
				color: #FFFFFF;
				textShadowColor: #000000;
			}
		}
	</fx:Style>
	
	
	<fx:Script>
		<![CDATA[
			import classes.DataManager;
			
			import events.LoginEvent;
			
			protected function btnLogin_clickHandler(event:MouseEvent):void
			{
				DataManager.instance.user.login(txtUser.text, txtPwd.text);
			}
			
			private function loginHandler(event:LoginEvent):void
			{
				if (event.success)
					navigator.popView();
			}
		]]>
	</fx:Script>
	<s:creationComplete>
		<![CDATA[
		DataManager.instance.user.addEventListener(LoginEvent.name, loginHandler);
		]]>
	</s:creationComplete>
	
	<s:Scroller width="100%" height="100%">
		<s:Group width="100%" height="100%">
			<s:layout>
				<s:MultiDPIVerticalLayout sourceDPI="320"
										  paddingTop="60" paddingBottom="20" paddingLeft="80" paddingRight="80" gap="0"/>
			</s:layout>
			<!-- logo -->
			<s:HGroup width="100%" height="150">
				<s:Spacer width="100%"/>
				<s:BitmapImage source="@Embed(source='assets/banner-login-top.png')" width="320" height="92"/>
				<s:Spacer width="100%"/>
			</s:HGroup>
			
			<!-- input fields -->
			<s:Group width="100%" height="124">
				<s:Rect width="100%" height="100%" radiusX="12">
					<s:fill>
						<s:SolidColor color="#FFFFFF" alpha="0.4"/>
					</s:fill>
				</s:Rect>
				<s:Label backgroundColor="#95CDE7" width="100%" height="2" y="61"/>
				<components:HintTextInput id="txtUser" hint="用户名" width="100%" y="0"/>
				<components:HintTextInput id="txtPwd" displayAsPassword="true" hint="密码" width="100%" y="63"/>
			</s:Group>
			<s:Spacer height="20"/>
			<s:Group width="100%" height="68">
				<s:Rect width="100%" height="100%" radiusX="8">
					<s:fill>
						<s:SolidColor color="#05b5ed"/>
					</s:fill>
					<s:stroke>
						<s:SolidColorStroke color="#000000" alpha="0.2" weight="2"/>
					</s:stroke>
				</s:Rect>
				<s:Label text="登录"
						 width="100%" height="100%"
						 fontSize="30"
						 color="#FFFFFF"
						 textAlign="center" verticalAlign="middle"
						 click="btnLogin_clickHandler(event)"
						 />
			</s:Group>
		</s:Group>
	</s:Scroller>
</s:View>